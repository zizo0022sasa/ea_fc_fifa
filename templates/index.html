<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FC 26 - طلب بيع الكوينز</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <style>
        /* ستايل مبسط بدون جافا سكريبت */
        .message.show {
            display: block;
            animation: slideInFromTop 0.5s ease;
        }
        
        .option-btn.selected {
            background: linear-gradient(45deg, rgba(0, 204, 102, 0.1), rgba(0, 102, 204, 0.1));
            border-color: var(--secondary-color);
            transform: scale(1.02);
        }
        
        .dynamic-payment-input {
            display: none;
            margin-top: 20px;
            animation: slideDown 0.3s ease;
        }
        
        .dynamic-payment-input.show {
            display: block;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-input.invalid {
            border-color: #DC2626;
            background: rgba(239, 68, 68, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="profile-card">
            <div class="header">
                <h1>🎮 FC 26 - EA SPORTS</h1>
                <p>طلب بيع الكوينز - بدون جافا سكريبت</p>
            </div>

            <!-- رسائل النجاح والخطأ -->
            {% if success_message %}
            <div class="message success show">
                {{ success_message|safe }}
            </div>
            {% endif %}

            {% if error_message %}
            <div class="message error show">
                {{ error_message|safe }}
            </div>
            {% endif %}

            <form method="POST" action="{{ url_for('submit_coins_order') }}">
                <!-- نوع التحويل -->
                <div class="form-section">
                    <h2 class="section-title">
                        <i class="fas fa-exchange-alt"></i>
                        نوع التحويل
                    </h2>
                    
                    <div class="option-buttons">
                        <label class="option-btn {{ 'selected' if form_data.get('transfer_type') == 'instant' else '' }}">
                            <input type="radio" name="transfer_type" value="instant" 
                                   {{ 'checked' if form_data.get('transfer_type') == 'instant' else '' }} 
                                   style="display: none;">
                            <i class="fas fa-bolt"></i>
                            <div class="option-title">تحويل فوري</div>
                            <div class="option-subtitle">أسرع في التنفيذ - خصم 15%</div>
                        </label>
                        
                        <label class="option-btn {{ 'selected' if form_data.get('transfer_type') == 'normal' else '' }}">
                            <input type="radio" name="transfer_type" value="normal" 
                                   {{ 'checked' if form_data.get('transfer_type') == 'normal' else '' }} 
                                   style="display: none;">
                            <i class="fas fa-clock"></i>
                            <div class="option-title">تحويل عادي</div>
                            <div class="option-subtitle">24-48 ساعة - بدون خصم</div>
                        </label>
                    </div>
                    {% if validation_errors.get('transfer_type') %}
                    <div class="error-message show">{{ validation_errors.transfer_type }}</div>
                    {% endif %}
                </div>

                <!-- كمية الكوينز -->
                <div class="form-section">
                    <h2 class="section-title">
                        <i class="fas fa-coins"></i>
                        كمية الكوينز المراد بيعها
                    </h2>
                    
                    <div class="coins-calculator">
                        <div class="coins-input-group">
                            <input type="number" 
                                   class="form-input coins-input {{ 'invalid' if validation_errors.get('coins_amount') else '' }}" 
                                   name="coins_amount" 
                                   placeholder="300" 
                                   min="300" 
                                   max="99999"
                                   value="{{ form_data.get('coins_amount', '') }}">
                            <div class="coins-unit">K</div>
                        </div>
                        
                        <div class="price-display">
                            <div class="price-label">المبلغ المستحق (تقريبي)</div>
                            <div class="price-amount">
                                {% if form_data.get('coins_amount') and form_data.get('transfer_type') %}
                                    {% set coins = form_data.coins_amount|int %}
                                    {% set base_price = coins * 0.02 %}
                                    {% if form_data.transfer_type == 'instant' %}
                                        {{ "%.2f"|format(base_price * 0.85) }} جنيه
                                    {% else %}
                                        {{ "%.2f"|format(base_price) }} جنيه
                                    {% endif %}
                                {% else %}
                                    0 جنيه
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% if validation_errors.get('coins_amount') %}
                    <div class="error-message show">{{ validation_errors.coins_amount }}</div>
                    {% endif %}
                </div>

                <!-- بيانات حساب EA -->
                <div class="form-section">
                    <h2 class="section-title">
                        <i class="fas fa-user-shield"></i>
                        بيانات حساب EA
                    </h2>
                    
                    <div class="ea-security-notice">
                        <i class="fas fa-shield-alt"></i>
                        بياناتك محمية بأعلى معايير الأمان والتشفير العالمي
                    </div>

                    <div class="form-group">
                        <label class="form-label">📧 البريد الإلكتروني لحساب EA</label>
                        <input type="email" 
                               class="form-input {{ 'invalid' if validation_errors.get('ea_email') else '' }}" 
                               name="ea_email" 
                               placeholder="example@gmail.com" 
                               value="{{ form_data.get('ea_email', '') }}"
                               required>
                        {% if validation_errors.get('ea_email') %}
                        <div class="error-message show">{{ validation_errors.ea_email }}</div>
                        {% endif %}
                    </div>

                    <div class="form-group">
                        <label class="form-label">🔒 كلمة مرور EA / ويب اب</label>
                        <input type="password" 
                               class="form-input {{ 'invalid' if validation_errors.get('ea_password') else '' }}" 
                               name="ea_password" 
                               placeholder="كلمة المرور" 
                               value="{{ form_data.get('ea_password', '') }}"
                               required>
                        {% if validation_errors.get('ea_password') %}
                        <div class="error-message show">{{ validation_errors.ea_password }}</div>
                        {% endif %}
                    </div>

                    <div class="form-group">
                        <label class="form-label">🛡️ أكواد النسخ الاحتياطي (6 أكواد - 8 أرقام لكل كود)</label>
                        <div class="backup-codes-grid">
                            {% for i in range(1, 7) %}
                            <input type="text" 
                                   class="form-input backup-code-input" 
                                   name="backup_code_{{ i }}" 
                                   placeholder="12345678" 
                                   maxlength="8"
                                   value="{{ form_data.get('backup_code_' ~ i, '') }}">
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- طريقة الدفع -->
                <div class="form-section">
                    <h2 class="section-title">
                        <i class="fas fa-credit-card"></i>
                        طريقة استلام الأموال
                    </h2>
                    
                    <div class="option-buttons">
                        <label class="option-btn payment-btn {{ 'selected' if form_data.get('payment_method') == 'فودافون كاش' else '' }}">
                            <input type="radio" name="payment_method" value="فودافون كاش"
                                   {{ 'checked' if form_data.get('payment_method') == 'فودافون كاش' else '' }} 
                                   style="display: none;">
                            <i class="fas fa-mobile-alt" style="color: #e60026;"></i>
                            <div class="option-title">فودافون كاش</div>
                        </label>
                        
                        <label class="option-btn payment-btn {{ 'selected' if form_data.get('payment_method') == 'اتصالات كاش' else '' }}">
                            <input type="radio" name="payment_method" value="اتصالات كاش"
                                   {{ 'checked' if form_data.get('payment_method') == 'اتصالات كاش' else '' }} 
                                   style="display: none;">
                            <i class="fas fa-mobile-alt" style="color: #ff8c00;"></i>
                            <div class="option-title">اتصالات كاش</div>
                        </label>
                        
                        <label class="option-btn payment-btn {{ 'selected' if form_data.get('payment_method') == 'أورانج كاش' else '' }}">
                            <input type="radio" name="payment_method" value="أورانج كاش"
                                   {{ 'checked' if form_data.get('payment_method') == 'أورانج كاش' else '' }} 
                                   style="display: none;">
                            <i class="fas fa-mobile-alt" style="color: #ff6600;"></i>
                            <div class="option-title">أورانج كاش</div>
                        </label>
                        
                        <label class="option-btn payment-btn {{ 'selected' if form_data.get('payment_method') == 'وي كاش' else '' }}">
                            <input type="radio" name="payment_method" value="وي كاش"
                                   {{ 'checked' if form_data.get('payment_method') == 'وي كاش' else '' }} 
                                   style="display: none;">
                            <i class="fas fa-mobile-alt" style="color: #7b2cbf;"></i>
                            <div class="option-title">وي كاش</div>
                        </label>
                        
                        <label class="option-btn payment-btn {{ 'selected' if form_data.get('payment_method') == 'كارت تيلدا' else '' }}">
                            <input type="radio" name="payment_method" value="كارت تيلدا"
                                   {{ 'checked' if form_data.get('payment_method') == 'كارت تيلدا' else '' }} 
                                   style="display: none;">
                            <i class="fas fa-credit-card" style="color: #6c5ce7;"></i>
                            <div class="option-title">كارت تيلدا</div>
                        </label>
                        
                        <label class="option-btn payment-btn {{ 'selected' if form_data.get('payment_method') == 'إنستا باي' else '' }}">
                            <input type="radio" name="payment_method" value="إنستا باي"
                                   {{ 'checked' if form_data.get('payment_method') == 'إنستا باي' else '' }} 
                                   style="display: none;">
                            <i class="fas fa-link" style="color: #00b894;"></i>
                            <div class="option-title">إنستا باي</div>
                        </label>
                    </div>
                    {% if validation_errors.get('payment_method') %}
                    <div class="error-message show">{{ validation_errors.payment_method }}</div>
                    {% endif %}
                    
                    <!-- حقول الدفع الديناميكية -->
                    {% if form_data.get('payment_method') in ['فودافون كاش', 'اتصالات كاش', 'أورانج كاش', 'وي كاش'] %}
                    <div class="dynamic-payment-input show">
                        <div class="form-group">
                            <label class="form-label">📱 رقم الهاتف (11 رقم)</label>
                            <input type="tel" 
                                   class="form-input {{ 'invalid' if validation_errors.get('mobile_number') else '' }}" 
                                   name="mobile_number" 
                                   placeholder="01xxxxxxxxx" 
                                   maxlength="11"
                                   value="{{ form_data.get('mobile_number', '') }}">
                            {% if validation_errors.get('mobile_number') %}
                            <div class="error-message show">{{ validation_errors.mobile_number }}</div>
                            {% endif %}
                        </div>
                    </div>
                    {% elif form_data.get('payment_method') == 'كارت تيلدا' %}
                    <div class="dynamic-payment-input show">
                        <div class="form-group">
                            <label class="form-label">💳 رقم البطاقة (16 رقم)</label>
                            <input type="text" 
                                   class="form-input {{ 'invalid' if validation_errors.get('card_number') else '' }}" 
                                   name="card_number" 
                                   placeholder="1234567890123456" 
                                   maxlength="16"
                                   value="{{ form_data.get('card_number', '') }}">
                            {% if validation_errors.get('card_number') %}
                            <div class="error-message show">{{ validation_errors.card_number }}</div>
                            {% endif %}
                        </div>
                    </div>
                    {% elif form_data.get('payment_method') == 'إنستا باي' %}
                    <div class="dynamic-payment-input show">
                        <div class="form-group">
                            <label class="form-label">🔗 رابط إنستا باي</label>
                            <input type="url" 
                                   class="form-input {{ 'invalid' if validation_errors.get('payment_link') else '' }}" 
                                   name="payment_link" 
                                   placeholder="https://instapay.com.eg/..."
                                   value="{{ form_data.get('payment_link', '') }}">
                            {% if validation_errors.get('payment_link') %}
                            <div class="error-message show">{{ validation_errors.payment_link }}</div>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                </div>

                <!-- ملاحظات إضافية -->
                <div class="form-section">
                    <h2 class="section-title">
                        <i class="fas fa-sticky-note"></i>
                        ملاحظات إضافية (اختياري)
                    </h2>
                    
                    <div class="form-group">
                        <textarea class="form-input" 
                                  name="notes" 
                                  rows="4" 
                                  placeholder="أي ملاحظات أو طلبات خاصة...">{{ form_data.get('notes', '') }}</textarea>
                    </div>
                </div>

                <!-- أزرار الإرسال -->
                <div class="submit-section">
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-paper-plane"></i>
                        إرسال طلب بيع الكوينز
                    </button>
                    
                    <a href="{{ url_for('index') }}" class="submit-btn" style="background: #6c757d; display: inline-block; text-decoration: none; margin-top: 10px;">
                        <i class="fas fa-arrow-right"></i>
                        العودة للصفحة الرئيسية
                    </a>
                </div>
            </form>
        </div>
    </div>
</body>
</html>
